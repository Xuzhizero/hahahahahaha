---
title: V1
slug: ybbtfnvh5sgdk8tk
url: https://www.yuque.com/caogongzi/pu6995/ybbtfnvh5sgdk8tk
---

# 高可靠高实时网络技术的发展趋势与国内外现状
## 引言
随着工业4.0、智能制造以及物联网技术的快速发展，传统以太网的"尽力而为"（Best-Effort）通信模式已无法满足现代工业控制系统对确定性、实时性和高可靠性的严苛要求。为解决非确定性延迟与丢包问题，业界提出了多种改进方案，这些方案在保证网络高可靠性的同时，还能确保低延时的高实时性能。本章将系统分析当前主流确定性网络技术的发展趋势，并从技术成熟度角度梳理其国内外应用现状。

## 成熟技术方案的发展与应用
### DiffServ QoS差分服务技术
#### 技术原理与优势分析
差分服务（Differentiated Services, DiffServ）是一种基于类别的网络服务质量（QoS）机制。该技术通过在网络边缘对数据流进行分类打标，使路由器和交换机能够根据不同的优先级提供差异化的转发服务。在IP包头的DiffServ字段中标记业务优先级（DSCP值），将数据流分类为有限的几类，并在网络节点实施对应的逐跳行为（PHB）策略。高优先级的重要流量可被路由器或交换机优先转发，低优先级的普通流量则延后处理。

DiffServ的技术优势主要体现在三个方面：第一，弹性扩展能力强，边缘设备完成流分类和标记，核心节点仅依据标记调度，大大降低了核心转发复杂度；第二，调度机制灵活，可结合优先队列、加权公平队列等队列管理算法，为不同业务提供低时延或低丢包等差异化服务；第三，带宽利用效率高，通过流量监管和整形避免某类业务独占带宽，协调不同业务共享网络资源。

#### 发展历程与应用现状
DiffServ理念于1998年由IETF提出并标准化（RFC 2474/2475），用于替代IPv4头中的旧TOS服务类型字段。1990年代末开始，DiffServ逐步取代IntServ成为主流QoS方案。该技术最早主要应用于运营商骨干和企业网中，以保障IP电话（VoIP）、视讯会议等延迟敏感业务的质量。

进入2000年代，DiffServ已非常普及，各大网络设备均支持基于DSCP的优先级调度策略。目前DiffServ已成为IP/Ethernet网络事实上的QoS标准，广泛部署于企业园区网、数据中心和广域互联网中。在电信领域，运营商结合DiffServ定义黄金、白银、青铜等服务等级，以满足SLA服务级别协议。

#### 容错能力与故障应对机制
DiffServ本身不直接提供链路故障冗余，但可与路由协议和冗余机制配合提高健壮性。在出现链路或节点故障时，网络能够通过路由收敛或快速重路由将DiffServ流量切换到备用路径，并继续沿既定的优先级规则转发。在MPLS网络中，可结合DiffServ感知的流量工程（DS-TE）实现快速切换并保证关键流量的带宽。拥塞管理算法（如WRED早弃）可以在网络过载趋紧时主动丢弃低优先级报文，避免影响重要业务。

### EtherCAT工业以太网技术
#### 技术原理与优势分析
EtherCAT是一种为工业自动化设计的高速实时以太网总线技术，由德国倍福公司于2003年推出。其独创的"On-the-fly"处理技术使数据帧在传输过程中被各节点实时读写，无需完整接收。由主站发送一帧报文依次串行穿过所有从站设备，每个从站在帧通过时即刻在硬件层面读取或写入自身数据，然后帧继续传递。

EtherCAT的技术优势源于其极高的通信效率和确定性。通过硬件级数据处理，从根本上消除了软件协议栈的不确定性。处理1000个I/O信号仅需30μs，是目前最快的工业以太网协议之一。支持分布式时钟同步机制，可令全网设备时钟同步精度达到纳秒级，确保诸如多轴电机同步这样的高精度控制。高达90%以上的有效数据率利用，使其在运动控制领域具有显著优势。

#### 发展历程与应用现状
EtherCAT于2003年发布后，很快成为工业以太网领域的主流方案之一。2008年，该协议被纳入IEC 61158国际标准。最初EtherCAT在高精度运动控制领域获得应用，特别是半导体设备和数控机床。随后，机械制造、印刷机和包装生产线等广泛采用EtherCAT替代传统现场总线。

目前EtherCAT已经非常成熟，在工厂自动化领域广泛普及。EtherCAT技术协会(ETG)拥有超过6000家成员公司，全球累计部署超过千万台工业设备。支持EtherCAT的主控制器和IO模块、驱动器传感器非常丰富。除了制造业，EtherCAT也被应用在高能加速器控制、音频处理系统等要求高实时性的场合。

#### 容错能力与故障应对机制
标准的EtherCAT网络可以通过拓扑和冗余配置实现容错。EtherCAT支持灵活拓扑，其中线型拓扑实际形成一个逻辑环路。利用这一特性，可配置成环网冗余模式：主站有两个网口分别连接环网两端，帧可双方向循环。一旦环上某处链路断开，通信仍可从另一方向到达未受影响的节点，实现通信不中断。这一环网自愈切换通常在一个帧周期内完成。此外，EtherCAT主站本身也可配置冗余，备用主站监测主网络状态，在主站故障时无缝接管通信。

### PROFINET IRT等时实时传输技术
#### 技术原理与优势分析
PROFINET IRT（Isochronous Real Time）是工业以太网的一种高级模式，旨在突破标准以太网非确定性的限制。其核心原理是在以太网上引入时间触发的通信调度：将网络通信周期划分为实时通信时隙和非实时通信时隙两部分，在实时时隙内只允许关键实时报文传输，其他流量需等待时隙结束再发送。

PROFINET IRT采用IEEE 1588精确时间协议的扩展版——精确透明时钟协议(PTCP)，在控制器与设备之间分发时钟，对全网进行纳秒量级的时间对齐。在IRT时隙期间，以太网MAC不再使用传统CSMA/CD争用，而是按照时分多址(TDMA)方式严格按照调度表发送帧。其优势显著：支持通信周期低至亚毫秒级（如0.25ms），同步精度小于1μs；采用等时调度避免了网络拥塞和队列抖动，通信延迟的变化范围极小；允许实时流和常规IT流量共用同一以太网，但互不干扰。

#### 发展历程与应用现状
PROFINET作为Profibus的继任工业以太网标准，于2002年前后由西门子等提出。2006年，PROFINET IO被纳入国际标准IEC 61158/61784，并引入了等时实时（IRT）通信扩展。IRT最早在工厂自动化领域获得应用，例如高速装配线、汽车制造中的机器人控制等需要严格同步的场景。

2000年代末，PROFINET IRT逐渐成熟，被欧洲制造业广泛接受，成为高端运动控制领域的主流方案之一。进入2010年代，IRT已在全球众多工厂生产线运行，并扩展到过程工业需要高同步的场合。目前PROFINET IRT作为成熟技术依然非常普及，各大自动化厂商均有支持IRT的控制器和接口产品。PROFINET主导欧洲市场，拥有数百家支持厂商。

#### 容错能力与故障应对机制
PROFINET IRT聚焦于消除网络内部延迟不确定性，对于故障容错则更多依赖拓扑冗余和协议扩展来实现。PROFINET支持媒体冗余协议(MRP)：将设备以环网连接，当某段链路断开时，环网冗余管理器在约200ms内恢复通信路径。为了满足高实时要求，PROFINET提供系统冗余选项，如同时配置两个IO控制器。在PROFINET的规范中，并行冗余协议(PRP)等可被上层应用结合使用。对于要求0丢包的运动控制系统，可设计双通道同时发送：即整个IRT网络划分为两个独立的子网，控制报文同时通过两网发送，接收端去重。

## 新兴技术方案的发展与应用
### 时间敏感网络（TSN）技术
#### 技术原理与优势分析
时间敏感网络（Time-Sensitive Networking, TSN）是IEEE 802.1工作组推出的新一代以太网标准系列，旨在让标准以太网具备确定性传输能力。TSN通过在以太网交换层引入一系列新机制，实现对关键流量的严格QoS保障。

TSN的核心技术特点包括：时间同步（802.1AS）、调度和队列准入控制（如802.1Qbv时间感知调度）、帧抢占（802.1Qbu & 802.3br）、无拥塞流量类以及帧复制与消除（802.1CB）等。TSN网络中的所有节点首先通过802.1AS达到亚微秒级时钟同步，随后使用802.1Qbv将每个交换端口的发送队列按照全局时间轴分成周期性时隙，只有在特定时隙打开相应队列，关键流的数据帧才能发送。

TSN的技术优势在于：通过时间触发调度和帧抢占，极大减少队列排队延迟，提供确定性时延上界；结合双路由复制，实现"说到做到"的数据交付；严格继承标准以太网帧格式和PHY层，时间敏感流量与传统非实时流量可共存于同一根网线。由于TSN采用标准芯片实现，成本随着规模效应迅速降低，其可扩展性也更好，可无缝支持从100Mbps到更高速率的网络。

#### 发展历程与应用现状
TSN脱胎于IEEE 802.1 Audio/Video Bridging (AVB)。AVB标准在2007年启动制定，2012年IEEE将AVB工作组重命名为TSN工作组，拓展目标到更广泛的工业和汽车领域。首批TSN标准于2015-2018年陆续发布。

TSN技术最初在专业音视频领域获得应用，随后汽车和工业公司高度关注TSN的发展。2018年前后，一些厂商推出了支持TSN特性的交换芯片与网卡。到2020年左右，TSN在工业自动化中的应用逐渐试点落地。OPC基金会将TSN结合OPC UA发布新架构，汽车行业中TSN被纳入车载以太网规范。

目前TSN正处于从小规模验证向规模部署过渡的阶段。全球各大自动化厂商均发布了TSN兼容产品系列，典型应用如工厂中的时间同步多轴运动控制、电力系统的继电保护以太网、5G基站前传同步等。虽然TSN还未像以太网那样无处不在，但其业界认可度极高，被视作未来十年确定性网络的基础。

#### 容错能力与故障应对机制
TSN在设计上集成了多层面的容错能力。借助时间同步和计划调度，TSN大幅降低了因临时重路由或链路抖动带来的影响。更重要的是，TSN的冗余机制802.1CB提供了强大的容错能力：发送端或中间节点可以将关键帧复制发送经由两条或多条不同路径，接收端根据序列号识别并丢弃重复帧。即使某一路径因设备失效完全中断，每个数据包仍有另一副本可到达终点，实现零恢复时间的容错。TSN支持的集中或分布式配置模型使网络具备全局优化能力：集中式网络管理器可以在检测到链路异常时，动态调整调度和流路由，将关键流迁移到健康路径。

### 确定性网络（DetNet）技术
#### 技术原理与优势分析
确定性网络（Deterministic Networking, DetNet）是IETF开发的第三层确定性网络技术，旨在将TSN等第二层实现的确定性技术扩展到第三层路由器和MPLS交换机上，从而在更大范围内提供端到端确定性服务。DetNet通过在现有分组网架构中增加对特定数据流的严格管控，使之获得可预知的最差情况时延、抖动和丢包上界。

DetNet的核心工作机制包括：资源预留，在网络路径上为DetNet流预留带宽、缓冲区等资源；显式路由，提供不会因网络变化而改变的固定传输路径；PREOF技术，数据包复制和消除功能，通过多路径传输提供冗余保护。DetNet综合运用了IntServ的精细资源预留和DiffServ的分类管理，同时与底层TSN标准协同工作。

DetNet的技术优势在于：标准化程度高，基于IETF RFC标准，确保不同厂商设备的互操作性；IP网络兼容，可以在现有IP基础设施上部署，降低升级成本；配置灵活，支持动态资源分配和路径调整。DetNet使广域互联网也可能实现类似本地工业网的严格QoS，对于远程工业控制、长距离音视频传输等非常关键。

#### 发展历程与应用现状
IETF的DetNet工作组于2015年成立，2017年正式启动标准制定工作。2019年，RFC 8655架构标准发布。2021-2024年，数据平面和服务模型标准陆续完成。DetNet最早的应用设想包括：工业自动化的时间敏感控制系统、电力系统的智能电网实时数据传输、交通运输的列车控制和交通信号系统。

当前DetNet仍处于早期试商用阶段。标准化方面，基础标准已完成，控制平面标准仍在开发。主要在测试实验室和概念验证项目中应用。思科、华为、爱立信等主要网络设备商开始提供支持。华为主导YANG数据模型开发，思科在工业交换机中集成DetNet功能，国家仪器在工业测控领域推广应用。部分电信运营商在试点将DetNet用于5G回传网，工业控制领域也有试验将DetNet用于远程控制。

#### 容错能力与故障应对机制
DetNet的容错能力几乎全面复用并扩展了TSN在第二层的思路。通过严格的带宽管理和队列隔离，确保网络节点不会因瞬时突发而丢弃该流的数据，实现零拥塞丢包。对于节点或链路故障，DetNet提供了多路径冗余传输的框架。在源节点或入口路由器处即可将流量复制为两个或多个分支，分别通过预先计算的独立路径传输。由于副本传输不依赖故障检测，不存在传统保护倒换等待时间。一些提案利用Segment Routing以预定义多条约束路径，或者采用网络编码进一步提高多路径利用率。DetNet通过空间冗余抵御随机故障，通过时间调度抵御拥塞失控。

## 
## 


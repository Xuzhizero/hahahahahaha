---
title: 自动目录生成和归档功能开发报告
slug: dspgliqu0gphxh1t
url: https://www.yuque.com/caogongzi/pu6995/dspgliqu0gphxh1t
---

这个功能的意义在于：不断为庞大的数据库进行目录细分。那么在未来检索的时候，可以根据目录以很低的时间和算力成本定位到我们想要的内容上（同时保证很高的检索精度）。



为此需要经历两个步骤：

1. 后台自动逐条检索
2. 检索结果聚类





（扣子的知识库分段功能非常糟糕。可能会把完整的一段话非常两个分段，导致索引不全，这是最要命的，需要我们用自己的AI去做分割。还有个稍微小的问题：因为分段不合理，导致出来了很多无关信息。）



具体思路：

1. 用fastgpt实现后台间隔一个小时处理一次（扣子不具备这个能力）
2. 用fastgpt现有的suixiangRecordNEW来聚类。数据量四百多条，足够包含所有类别
3. 用每一条id的英文摘要进行检索，将得到的所有结果的前N条的话题进行分析，提取出一个类别，对应于这个id，并存放包含的所有涉及id
4. 第三步循环遍所有词条
5. 对所有id的类别进行归纳，分类成15个大类，并得到每一个大类的小类，每一个小类
6. 数据库分两个表。一个是总表，用于存储各项数据。第二个是存储目录结构的表（称为表2）。第二个表的结构是：

| 目录层级 | 名称 | 解释说明 |
| --- | --- | --- |
| 一级目录 | a,b,c | a,b,c代表一级目录的名称 |
| 二级目录 | d_BelongsTo_a,e_BelongsTo_a,f_BelongsTo_b | d, e,f代表二级目录的名称，它们的上级目录可以用_BelongsTo_查看 |
| 三级目录 | g_BelongsTo_e, h_BelongsTo_e | g,h 代表三级目录的名称，它们的上级目录可以用_BelongsTo_查看 |


7. 我们检索时，我们提供了问题以后，AI从一级目录自上而下定位到最后相关的内容； 存储时，道理类似。 AI提供某个词条的联想时，自所在词条的最末端目录自下而上，返回相关的其他词条。
8. 当最末端的目录中包含的内容超过一定数量时（例如15个），就会自动在表2中新增一行，用于存储新的末端目录，并且对总表的对应内容的“所在目录”字段进行更新

注意：

1. 可能一个词条出现在不同类别里。这是允许的。
2. 总表里，“所在目录”字段，只会存储最末端的所在目录。





# 基本目录层级构思
一级：当前任务和处境、心得体会、未来规划、个人自述、数理技术相关、人文相关、二轻集团相关备忘、其他备忘、爱情友情和亲情

二级（备选）：当前任务——当前中期任务、短期代办事项； 个人自述——  基本信息、才华能力、人生经历、健康状况、已取成就、喜好、三观、性格特点、作息习惯、

三级（备选）： 





# 一级目录说明
以下是为您设计的一级目录名称及注释（采用工整规范的表格形式呈现）：



| 一级目录名称 | 注释说明 |
| --- | --- |
| 数理技术相关 | 数学建模、算法研究、工程技术等硬技能领域的专业文档及学习笔记 |
| 心得体会 | 个人在实践过程中形成的经验总结、认知迭代与反思性记录 |
| 其他备忘 | 未纳入上述分类的临时性记录、待办事项及跨领域零散信息 |
| 未来规划 | 包含短期目标、长期战略及实施路径的体系化规划文档 |
| 当前处境挑战 | 记录现阶段工作/生活中面临的核心问题、瓶颈及外部环境带来的挑战 |
| 个人自述 | 个人成长档案、能力矩阵、关键事件记录等系统性自我描述内容 |
| 爱情友情和亲情 | 亲密关系（爱情、友情、亲情）的成长记录、重要事件备忘与情感思考 |








格式说明：

1. 采用等宽字体保证视觉对齐

2. 注释采用"领域+内容性质+文档类型"三层结构定义

3. 每个注释包含核心功能描述与典型内容示例

4. 分类标准保持MECE原则（相互独立，完全穷尽）

5. 保留"其他"类目确保分类系统的扩展性



建议补充说明：

• 目录命名采用"名词+限定词"结构（如"XX相关""XX备忘"）



• 同级目录名称字数控制在4-6字范围内保持整齐



• 建议为每个一级目录建立对应的编号体系（如01_当前处境挑战）





在SQL中的更新代码(亲测有效）：

```plain
UPDATE suixiangRecord
SET catalog = CASE label
    -- 技术类标签
    WHEN '技术开发随想' THEN '数理技术相关'
    WHEN '技术开发日志' THEN '数理技术相关'
    WHEN '个人主页网站制作备忘录' THEN '数理技术相关'
    WHEN '仿真平台开发' THEN '数理技术相关'
    WHEN '技术开发' THEN '数理技术相关'
    WHEN '技术开发 需要AI情景' THEN '数理技术相关'
    WHEN '网页开发' THEN '数理技术相关'
    
    -- 心得类标签
    WHEN '心得' THEN '心得体会'
    WHEN '心得体会' THEN '心得体会'
    
    -- 规划类标签
    WHEN '战略规划' THEN '未来规划'
    
    -- 当前挑战类标签
    WHEN '代办' THEN '当前处境挑战'
    WHEN '战术规划' THEN '当前处境挑战'
    
    -- 个人类标签
    WHEN '个人喜好' THEN '个人自述'
    
    -- 人际关系类标签
    WHEN '谈恋爱' THEN '爱情友情和亲情'
    
    -- 备忘类标签
    WHEN '待定（AI难以归类）' THEN '其他备忘'
    WHEN '小结' THEN '其他备忘'
    WHEN '日报' THEN '其他备忘'
    
    -- 默认保留原值（不匹配的标签不更新）
    ELSE catalog
END
WHERE label IN (
    '技术开发随想', '心得', '待定（AI难以归类）', '战略规划', '小结',
    '代办', '战术规划', '日报', '个人喜好', '心得体会',
    '技术开发日志', '谈恋爱', '个人主页网站制作备忘录',
    '仿真平台开发', '技术开发', '技术开发 需要AI情景', '网页开发'
);
```



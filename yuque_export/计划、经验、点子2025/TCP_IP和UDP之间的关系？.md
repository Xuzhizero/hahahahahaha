---
title: TCP/IP和UDP之间的关系？
slug: ocly9vu0biuqegck
url: https://www.yuque.com/caogongzi/pu6995/ocly9vu0biuqegck
---

TCP/IP和UDP并非“包含”或“从属”关系，而是**TCP/IP协议族中并列的两种核心传输层协议**，二者共享IP协议（网络层）提供的“端到端数据传输通道”，但在数据传输的可靠性、效率、适用场景等维度存在本质差异，共同支撑不同需求的网络通信。



要理解二者的关系，需先明确“TCP/IP协议族”的层级结构——网络通信遵循“分层模型”，每一层专注特定功能，上层依赖下层提供的服务。TCP和UDP都属于**传输层**，作用是“在源主机和目标主机的应用程序之间建立通信连接”，而它们的下层是**网络层的IP协议**（负责将数据从“源主机”路由到“目标主机”）。



### 一、核心共性：共享IP协议，同属传输层
TCP和UDP的“协作基础”是IP协议，二者的工作流程存在共同逻辑：

1. 应用层（如浏览器、微信、视频播放器）产生的数据，会先交给传输层的TCP或UDP；
2. TCP/UDP会给数据添加“端口号”（标识目标应用程序，如HTTP用80端口、DNS用53端口），形成“段（Segment，TCP）”或“数据报（Datagram，UDP）”；
3. 传输层数据会交给网络层的IP协议，IP添加“源IP地址”和“目标IP地址”，形成“IP数据包”；
4. IP数据包通过链路层（如以太网、WiFi）传输到目标主机，再反向拆解，最终交给目标应用程序。

简言之：**TCP和UDP都依赖IP协议实现“跨主机传输”，核心目标都是“将数据精准送达目标应用程序”，但实现方式完全不同**。



### 二、核心差异：可靠性与效率的“取舍”
TCP和UDP的根本区别，在于是否为“可靠传输”设计——TCP牺牲部分效率换取可靠性，UDP牺牲可靠性换取极致效率。二者的关键差异可通过下表清晰对比：

| 对比维度 | TCP（传输控制协议） | UDP（用户数据报协议） |
| --- | --- | --- |
| **传输可靠性** | 可靠（确保数据不丢失、不重复、按序到达） | 不可靠（数据可能丢失、乱序、重复） |
| **连接方式** | 面向连接（通信前需“三次握手”建立连接，结束后“四次挥手”关闭连接） | 无连接（直接发送数据，无需建立/关闭连接） |
| **数据边界** | 面向字节流（无固定数据边界，需应用层自行定义） | 面向数据报（每个数据报是独立单元，发送和接收边界一致） |
| **拥塞控制/流量控制** | 有（通过滑动窗口、慢启动等机制，避免网络拥堵或目标主机过载） | 无（不管网络状态，持续发送数据，可能导致拥堵） |
| **开销** | 高（连接建立/关闭、确认、重传等机制增加数据量和延迟） | 低（仅添加端口号，头部仅8字节，远小于TCP的20-60字节） |
| **适用场景** | 对可靠性要求高的场景（如网页浏览、文件下载、转账支付） | 对实时性要求高的场景（如视频通话、直播、游戏、DNS查询） |


### 三、典型场景对比：何时用TCP，何时用UDP？
二者的差异直接决定了适用场景，不存在“谁更好”，只存在“谁更合适”：

+ **TCP的典型场景**：
    1. HTTP/HTTPS（网页浏览）：必须确保网页代码、图片不丢失，否则页面错乱；
    2. 文件传输（FTP、迅雷）：丢失部分数据会导致文件损坏，无法打开；
    3. 即时通讯的文字消息（微信文本）：文字丢失会影响沟通，需确保送达；
    4. 在线支付（支付宝、银行卡转账）：绝对不允许数据丢失，否则可能导致资金异常。
+ **UDP的典型场景**：
    1. 视频/音频通话（Zoom、微信语音）：少量数据丢失仅导致短暂卡顿，若用TCP的重传机制，会造成“延迟累积”（卡顿越来越严重）；
    2. 直播（抖音、 Twitch）：实时性优先，丢失1-2帧画面不影响观看，若等待重传，画面会严重滞后；
    3. 游戏（王者荣耀、CS）：操作指令（如“移动”“开枪”）需毫秒级响应，若用TCP，重传延迟会导致“操作延迟”，影响体验；
    4. DNS查询（域名转IP）：查询请求仅几十字节，即使丢失，客户端会立即重发，用UDP更高效（若用TCP，建立连接的时间比查询本身还长）。



### 四、总结：二者的关系本质
TCP和UDP是**TCP/IP协议族中“功能互补的传输层协议”**：

+ 它们共享IP协议的“跨主机路由能力”，共同解决“应用程序间通信”的问题；
+ 它们通过“可靠性与效率的取舍”，分别覆盖“需要精准传输”和“需要实时响应”的两类核心场景；
+ 没有TCP，网络无法实现稳定的文件传输、支付等关键功能；没有UDP，网络无法支撑流畅的视频、游戏等实时交互场景。

简言之：TCP是“严谨的快递员”（确保包裹精准送达，慢但稳），UDP是“高效的信使”（快速传递消息，快但可能丢件），二者配合，才能让互联网既稳定又灵活。


